name: Fetch and Display Result

on:
  push:
    branches:
      - update/**

jobs:
  get_branches:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2

      - name: List Branches
        id: list_branches
        run: |
          echo "BRANCHES=$(git ls-remote --heads origin | awk -F/ '$3 ~ /^feature/ && $4 == "base" {print $3 "/" $4}' | tr '\n' ',')"

      - name: Display Branches
        run: |
          echo "Branches: ${{ env.BRANCHS }}"